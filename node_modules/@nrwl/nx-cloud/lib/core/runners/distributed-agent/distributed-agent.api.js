const a5_0x2e2a=['runGroup:\x20','ciExecutionId','note','createMetricRecorder','dtePollTasks','response','error','DistributedAgentApi','../../../utilities/metric-logger','__awaiter','agentName','Completed\x20run\x20group\x20with\x20an\x20error','value','post','recordMetric','ciExecutionEnv','../../../utilities/environment','error:\x20','then','../../../utilities/axios','ciExecutionId:\x20','done','data','RUNNER_FAILURE_PERF_ENTRY','axiosMultipleTries','completeRunGroupWithError','apply','runGroup','next','/nx-cloud/executions/tasks','/nx-cloud/executions/complete-run-group','__esModule','Completing\x20with\x20an\x20error','axiosException','branch','mapRespToPerfEntry','apiAxiosInstance'];(function(_0x557416,_0x2e2a7f){const _0x7b751e=function(_0x271f7c){while(--_0x271f7c){_0x557416['push'](_0x557416['shift']());}};_0x7b751e(++_0x2e2a7f);}(a5_0x2e2a,0x1cb));const a5_0x7b75=function(_0x557416,_0x2e2a7f){_0x557416=_0x557416-0x0;let _0x7b751e=a5_0x2e2a[_0x557416];return _0x7b751e;};'use strict';var __awaiter=this&&this[a5_0x7b75('0x1f')]||function(_0x559730,_0x5e3b29,_0x162243,_0x3b0759){function _0x27b25d(_0x516e4e){return _0x516e4e instanceof _0x162243?_0x516e4e:new _0x162243(function(_0x440b30){_0x440b30(_0x516e4e);});}return new(_0x162243||(_0x162243=Promise))(function(_0x5c4a4b,_0x5cdd15){function _0x343481(_0x17c4f8){try{_0x1f76f6(_0x3b0759[a5_0x7b75('0xd')](_0x17c4f8));}catch(_0x58c379){_0x5cdd15(_0x58c379);}}function _0x155538(_0x5e0ae6){try{_0x1f76f6(_0x3b0759['throw'](_0x5e0ae6));}catch(_0x1f04ff){_0x5cdd15(_0x1f04ff);}}function _0x1f76f6(_0x4bf366){_0x4bf366[a5_0x7b75('0x6')]?_0x5c4a4b(_0x4bf366[a5_0x7b75('0x22')]):_0x27b25d(_0x4bf366['value'])[a5_0x7b75('0x3')](_0x343481,_0x155538);}_0x1f76f6((_0x3b0759=_0x3b0759[a5_0x7b75('0xb')](_0x559730,_0x5e3b29||[]))[a5_0x7b75('0xd')]());});};Object['defineProperty'](exports,a5_0x7b75('0x10'),{'value':!![]});exports[a5_0x7b75('0x1d')]=void 0x0;const axios_1=require(a5_0x7b75('0x4'));const environment_1=require(a5_0x7b75('0x1'));const metric_logger_1=require(a5_0x7b75('0x1e'));const {output}=require('../../../utilities/nx-imports');class DistributedAgentApi{constructor(_0x23ecc8,_0x28c67b,_0x5242ee,_0x5a4586,_0x27e538,_0x64d91e){this[a5_0x7b75('0x13')]=_0x28c67b;this[a5_0x7b75('0xc')]=_0x5242ee;this['ciExecutionId']=_0x5a4586;this['ciExecutionEnv']=_0x27e538;this[a5_0x7b75('0x20')]=_0x64d91e;this[a5_0x7b75('0x15')]=(0x0,axios_1['createApiAxiosInstance'])(_0x23ecc8);}['tasks'](_0x359f4e,_0x29dafe,_0x1eb0e3,_0x4048d6){var _0x31c85a;return __awaiter(this,void 0x0,void 0x0,function*(){const _0x272c38=(0x0,metric_logger_1[a5_0x7b75('0x19')])(a5_0x7b75('0x1a'));try{const _0x500a3c=yield(0x0,axios_1[a5_0x7b75('0x9')])(()=>this[a5_0x7b75('0x15')][a5_0x7b75('0x23')](a5_0x7b75('0xe'),{'runGroup':this[a5_0x7b75('0xc')],'ciExecutionId':this[a5_0x7b75('0x17')],'ciExecutionEnv':this[a5_0x7b75('0x0')],'agentName':this[a5_0x7b75('0x20')],'executionId':_0x359f4e,'statusCode':_0x29dafe,'completedTasks':_0x1eb0e3,'targets':_0x4048d6}));_0x272c38[a5_0x7b75('0x24')]((0x0,metric_logger_1[a5_0x7b75('0x14')])(_0x500a3c));return _0x500a3c[a5_0x7b75('0x7')];}catch(_0x55c02c){_0x272c38[a5_0x7b75('0x24')](((_0x31c85a=_0x55c02c===null||_0x55c02c===void 0x0?void 0x0:_0x55c02c[a5_0x7b75('0x12')])===null||_0x31c85a===void 0x0?void 0x0:_0x31c85a['response'])?(0x0,metric_logger_1[a5_0x7b75('0x14')])(_0x55c02c[a5_0x7b75('0x12')][a5_0x7b75('0x1b')]):metric_logger_1[a5_0x7b75('0x8')]);throw _0x55c02c;}});}[a5_0x7b75('0xa')](_0x5e08fd){var _0x9a31c1;return __awaiter(this,void 0x0,void 0x0,function*(){if(environment_1['VERBOSE_LOGGING']){output[a5_0x7b75('0x18')]({'title':a5_0x7b75('0x11'),'bodyLines':[a5_0x7b75('0x5')+this[a5_0x7b75('0x17')],'ciExecutionEnv:\x20'+this[a5_0x7b75('0x0')],a5_0x7b75('0x16')+this[a5_0x7b75('0xc')],a5_0x7b75('0x2')+_0x5e08fd]});}const _0x46e3f4=(0x0,metric_logger_1[a5_0x7b75('0x19')])('completeRunGroup');try{const _0x422884=yield(0x0,axios_1[a5_0x7b75('0x9')])(()=>this[a5_0x7b75('0x15')][a5_0x7b75('0x23')](a5_0x7b75('0xf'),{'branch':this[a5_0x7b75('0x13')],'runGroup':this[a5_0x7b75('0xc')],'ciExecutionId':this[a5_0x7b75('0x17')],'ciExecutionEnv':this[a5_0x7b75('0x0')],'agentName':this[a5_0x7b75('0x20')],'criticalErrorMessage':_0x5e08fd}));if(environment_1['VERBOSE_LOGGING']){output[a5_0x7b75('0x18')]({'title':a5_0x7b75('0x21')});}_0x46e3f4[a5_0x7b75('0x24')]((0x0,metric_logger_1['mapRespToPerfEntry'])(_0x422884));}catch(_0x148bc7){_0x46e3f4[a5_0x7b75('0x24')](((_0x9a31c1=_0x148bc7===null||_0x148bc7===void 0x0?void 0x0:_0x148bc7['axiosException'])===null||_0x9a31c1===void 0x0?void 0x0:_0x9a31c1[a5_0x7b75('0x1b')])?(0x0,metric_logger_1[a5_0x7b75('0x14')])(_0x148bc7[a5_0x7b75('0x12')][a5_0x7b75('0x1b')]):metric_logger_1[a5_0x7b75('0x8')]);console[a5_0x7b75('0x1c')](_0x148bc7);}});}}exports[a5_0x7b75('0x1d')]=DistributedAgentApi;