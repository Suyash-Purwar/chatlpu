const a10_0xa3b7=['value','createApiAxiosInstance','Workspace\x20is\x20disabled.\x20Cannot\x20perform\x20distributed\x20task\x20executions.','configuration','VERBOSE_LOGGING','RUNNER_FAILURE_PERF_ENTRY','completeRunGroupWithError','response','createMetricRecorder','error:\x20','stringify','/nx-cloud/executions/start','true','../../../utilities/metric-logger','next','error','../../../utilities/nx-imports','apiAxiosInstance','NX_CLOUD_DISTRIBUTED_EXECUTION_AGENT_COUNT','../../../utilities/axios','Completing\x20with\x20an\x20error','data','../../../utilities/serializer-overrides','exit','note','/nx-cloud/executions/complete-run-group','apply','post','project','ciExecutionId:\x20','map','done','mapRespToPerfEntry','maxParallel','axiosException','then','__awaiter','__esModule','hash','axiosMultipleTries','stopAgentsOnFailure','completeRunGroup','serializeOverrides','/nx-cloud/executions/status','DistributedExecutionApi','throw','enabled','createStartRequest','NX_CLOUD_DISTRIBUTED_EXECUTION_STOP_AGENTS_ON_FAILURE','target','recordMetric','dteStart','../../../utilities/environment','Starting\x20a\x20distributed\x20execution','parallel'];(function(_0x5a5161,_0xa3b7bf){const _0x298830=function(_0xa04832){while(--_0xa04832){_0x5a5161['push'](_0x5a5161['shift']());}};_0x298830(++_0xa3b7bf);}(a10_0xa3b7,0x1df));const a10_0x2988=function(_0x5a5161,_0xa3b7bf){_0x5a5161=_0x5a5161-0x0;let _0x298830=a10_0xa3b7[_0x5a5161];return _0x298830;};'use strict';var __awaiter=this&&this[a10_0x2988('0x34')]||function(_0x6fff3f,_0x4be587,_0x479b7e,_0x3c5277){function _0x2d095b(_0xb49a44){return _0xb49a44 instanceof _0x479b7e?_0xb49a44:new _0x479b7e(function(_0x16628c){_0x16628c(_0xb49a44);});}return new(_0x479b7e||(_0x479b7e=Promise))(function(_0x31b269,_0x4accad){function _0x10f941(_0x143942){try{_0x2fa075(_0x3c5277[a10_0x2988('0x1e')](_0x143942));}catch(_0x384dc6){_0x4accad(_0x384dc6);}}function _0x320069(_0x4ef566){try{_0x2fa075(_0x3c5277[a10_0x2988('0x6')](_0x4ef566));}catch(_0xe7e27c){_0x4accad(_0xe7e27c);}}function _0x2fa075(_0x2e8aac){_0x2e8aac[a10_0x2988('0x2f')]?_0x31b269(_0x2e8aac[a10_0x2988('0x10')]):_0x2d095b(_0x2e8aac[a10_0x2988('0x10')])[a10_0x2988('0x33')](_0x10f941,_0x320069);}_0x2fa075((_0x3c5277=_0x3c5277[a10_0x2988('0x2a')](_0x6fff3f,_0x4be587||[]))['next']());});};Object['defineProperty'](exports,a10_0x2988('0x35'),{'value':!![]});exports['createStartRequest']=exports[a10_0x2988('0x5')]=void 0x0;const axios_1=require(a10_0x2988('0x23'));const environment_1=require(a10_0x2988('0xd'));const metric_logger_1=require(a10_0x2988('0x1d'));const serializer_overrides_1=require(a10_0x2988('0x26'));const {output}=require(a10_0x2988('0x20'));class DistributedExecutionApi{constructor(_0x282000){this[a10_0x2988('0x21')]=(0x0,axios_1[a10_0x2988('0x11')])(_0x282000);}['start'](_0x385ecc){var _0x4b0fc9;return __awaiter(this,void 0x0,void 0x0,function*(){const _0x340359=(0x0,metric_logger_1['createMetricRecorder'])(a10_0x2988('0xc'));let _0xa499f4;if(environment_1['VERBOSE_LOGGING']){output[a10_0x2988('0x28')]({'title':a10_0x2988('0xe'),'bodyLines':[JSON[a10_0x2988('0x1a')](_0x385ecc,null,0x2)]});}try{_0xa499f4=yield(0x0,axios_1[a10_0x2988('0x0')])(()=>this[a10_0x2988('0x21')][a10_0x2988('0x2b')](a10_0x2988('0x1b'),_0x385ecc));_0x340359[a10_0x2988('0xb')]((0x0,metric_logger_1[a10_0x2988('0x30')])(_0xa499f4));}catch(_0x51fc6e){_0x340359[a10_0x2988('0xb')](((_0x4b0fc9=_0x51fc6e===null||_0x51fc6e===void 0x0?void 0x0:_0x51fc6e[a10_0x2988('0x32')])===null||_0x4b0fc9===void 0x0?void 0x0:_0x4b0fc9['response'])?(0x0,metric_logger_1['mapRespToPerfEntry'])(_0x51fc6e[a10_0x2988('0x32')][a10_0x2988('0x17')]):metric_logger_1['RUNNER_FAILURE_PERF_ENTRY']);throw _0x51fc6e;}if(!_0xa499f4[a10_0x2988('0x25')][a10_0x2988('0x7')]){throw new Error(a10_0x2988('0x12'));}if(_0xa499f4[a10_0x2988('0x25')][a10_0x2988('0x1f')]){throw new Error(_0xa499f4[a10_0x2988('0x25')]['error']);}return _0xa499f4[a10_0x2988('0x25')]['id'];});}['status'](_0x4b7e02){var _0x1fe08a;return __awaiter(this,void 0x0,void 0x0,function*(){const _0x154615=(0x0,metric_logger_1['createMetricRecorder'])('dteStatus');try{const _0x12403f=yield(0x0,axios_1[a10_0x2988('0x0')])(()=>this['apiAxiosInstance'][a10_0x2988('0x2b')](a10_0x2988('0x4'),{'id':_0x4b7e02}));_0x154615[a10_0x2988('0xb')]((0x0,metric_logger_1['mapRespToPerfEntry'])(_0x12403f));return _0x12403f[a10_0x2988('0x25')];}catch(_0x424efe){_0x154615[a10_0x2988('0xb')](((_0x1fe08a=_0x424efe===null||_0x424efe===void 0x0?void 0x0:_0x424efe[a10_0x2988('0x32')])===null||_0x1fe08a===void 0x0?void 0x0:_0x1fe08a[a10_0x2988('0x17')])?(0x0,metric_logger_1['mapRespToPerfEntry'])(_0x424efe[a10_0x2988('0x32')][a10_0x2988('0x17')]):metric_logger_1[a10_0x2988('0x15')]);output[a10_0x2988('0x1f')]({'title':_0x424efe['message']});process[a10_0x2988('0x27')](0x1);}});}[a10_0x2988('0x16')](_0x4001a6,_0x4b76eb,_0x5d7c5a,_0x21b74d,_0x23d7ad){var _0x5c4044;return __awaiter(this,void 0x0,void 0x0,function*(){const _0x49deca=(0x0,metric_logger_1[a10_0x2988('0x18')])(a10_0x2988('0x2'));if(environment_1[a10_0x2988('0x14')]){output['note']({'title':a10_0x2988('0x24'),'bodyLines':[a10_0x2988('0x2d')+_0x5d7c5a,'ciExecutionEnv:\x20'+_0x21b74d,'runGroup:\x20'+_0x4b76eb,a10_0x2988('0x19')+_0x23d7ad]});}try{const _0x20b9d0=yield(0x0,axios_1['axiosMultipleTries'])(()=>this[a10_0x2988('0x21')][a10_0x2988('0x2b')](a10_0x2988('0x29'),{'runGroup':_0x4b76eb,'ciExecutionId':_0x5d7c5a,'ciExecutionEnv':_0x21b74d,'criticalErrorMessage':_0x23d7ad}),0x3);_0x49deca[a10_0x2988('0xb')]((0x0,metric_logger_1[a10_0x2988('0x30')])(_0x20b9d0));}catch(_0x4e0087){_0x49deca[a10_0x2988('0xb')](((_0x5c4044=_0x4e0087===null||_0x4e0087===void 0x0?void 0x0:_0x4e0087[a10_0x2988('0x32')])===null||_0x5c4044===void 0x0?void 0x0:_0x5c4044[a10_0x2988('0x17')])?(0x0,metric_logger_1[a10_0x2988('0x30')])(_0x4e0087[a10_0x2988('0x32')][a10_0x2988('0x17')]):metric_logger_1[a10_0x2988('0x15')]);}});}}exports[a10_0x2988('0x5')]=DistributedExecutionApi;function createStartRequest(_0x27c10e,_0x2a48df,_0x2c216c,_0x311613,_0x3cc09c,_0x2bde7f){const _0x4ca7f1=_0x3cc09c['map'](_0x4bc2e7=>{return _0x4bc2e7[a10_0x2988('0x2e')](_0x2bbf77=>{return{'taskId':_0x2bbf77['id'],'hash':_0x2bbf77[a10_0x2988('0x36')],'projectName':_0x2bbf77[a10_0x2988('0xa')][a10_0x2988('0x2c')],'target':_0x2bbf77[a10_0x2988('0xa')]['target'],'configuration':_0x2bbf77['target'][a10_0x2988('0x13')]||null,'params':(0x0,serializer_overrides_1[a10_0x2988('0x3')])(_0x2bbf77)};});});const _0x5dbd93={'command':(0x0,environment_1['parseCommand'])(),'branch':_0x27c10e,'runGroup':_0x2a48df,'ciExecutionId':_0x2c216c,'ciExecutionEnv':_0x311613,'tasks':_0x4ca7f1,'maxParallel':calculateMaxParallel(_0x2bde7f)};if(environment_1[a10_0x2988('0x22')]){_0x5dbd93['agentCount']=environment_1[a10_0x2988('0x22')];}if(!environment_1[a10_0x2988('0x9')]){_0x5dbd93[a10_0x2988('0x1')]=![];}return _0x5dbd93;}exports[a10_0x2988('0x8')]=createStartRequest;function calculateMaxParallel(_0x4c2f4a){if(_0x4c2f4a['parallel']==='false'||_0x4c2f4a[a10_0x2988('0xf')]===![]){return 0x1;}else if(_0x4c2f4a[a10_0x2988('0xf')]===a10_0x2988('0x1c')||_0x4c2f4a[a10_0x2988('0xf')]===!![]){return Number(_0x4c2f4a['maxParallel']||0x3);}else if(_0x4c2f4a[a10_0x2988('0xf')]===undefined){return _0x4c2f4a[a10_0x2988('0x31')]?Number(_0x4c2f4a[a10_0x2988('0x31')]):0x3;}else{return Number(_0x4c2f4a[a10_0x2988('0xf')])||0x3;}}